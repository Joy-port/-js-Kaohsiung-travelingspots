{"version":3,"sources":["all.js"],"names":["AOS","init","once","offset","refresh","url","cardList","document","querySelector","select","tabsList","subtitle","pageList","data","page","getData","axios","get","then","response","result","records","renderData","showData","selectGroup","map","item","Zone","newSelect","filter","index","indexOf","selectStr","forEach","list","innerHTML","textContent","pagination","updateData","str","content","Picture1","Picdescribe1","Name","Opentime","Add","Tel","Ticketinfo","addEventListener","switchDataSelect","e","target","value","chosenDistrict","dataFilter","dataset","type","switchDataTabs","preventDefault","nodeName","chosenTab","district","title","nowPage","dataTotal","length","showPerPage","pageTotal","Math","ceil","currentPage","minData","maxData","currentPageData","num","push","hasPage","hasNext","pageBtn","current","pageLen","now","parseInt","i","switchPage","pageClicked","filterData"],"mappings":"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","file":"all.js","sourcesContent":["AOS.init({\n  once:true,\n  offset: 50,\n});\nAOS.refresh();\n\nconst url = \"https://raw.githubusercontent.com/hexschool/KCGTravel/master/datastore_search.json\";\nconst cardList = document.querySelector(\".card-list\");\nconst select = document.querySelector(\".select-group\");\nconst tabsList = document.querySelector(\".tabs-list\");\nconst subtitle = document.querySelector(\".subtitle\");\nconst pageList = document.querySelector(\".pagination-list\");\n\nlet data = [];\nlet page = {};\n\n//axios get data\nfunction getData(){\n  axios.get(url)\n  .then(function (response) {\n    data = response.data.result.records;\n    renderData(data);\n   \n });\n}\ngetData();\n\n//渲染select filter\nfunction renderData(showData){\n  //渲染有存在的行政區到選單欄位\n  //方法一\n  //let selectGroup = data.map(item => item.Zone);\n  //let newSelect = [new Set(selectGroup)];\n\n  //方法二\n  let selectGroup = showData.map(item => item.Zone);\n  let newSelect = selectGroup.filter((item,index) => selectGroup.indexOf(item) == index);\n  let selectStr =`<option value=\"高雄全區\" selected>-- 高雄全區 --</option>`;\n  newSelect.forEach(function(item){\n  let list =`<option value=\"${item}\">${item}</option>`;\n    selectStr += list ;\n    \n  });\n  \n  select.innerHTML = selectStr;\n  subtitle.textContent =\"高雄全區\";\n  \n  pagination(showData, 1);\n}\n\n//渲染所有清單資料到畫面上\nfunction updateData(showData){\n  let str = '';  \n  showData.forEach(function(item){\n    let content =`<li class=\"card\" data-aos=\"fade\" data-aos-duration=\"900\">\n        <div class=\"card-header\" style=\"background-image:url(${item.Picture1}\"  title=\"${item.Picdescribe1}\" data-aos=\"fade\" data-aos-duration=\"800\">\n          <div class=\"card-title\">\n          <h4>${item.Name}</h4>\n          <p>${item.Zone}</p>\n            </div>\n        </div>\n        <ul class=\"card-body\">\n          <li>\n           <i class=\"fas fa-clock\"></i>\n            <p>${item.Opentime}</p>\n          </li>\n          <li>\n            <i class=\"fas fa-map-marker-alt\"></i>\n            <p>${item.Add}</p>\n          </li>\n          <li class=\"card-footer\">\n            <div>\n            <i class=\"fas fa-mobile-alt\"></i>\n            <p>${item.Tel}</p>\n              </div>\n            <div class=\"card-footer-item\" data-display=${item.Ticketinfo == \"免費參觀\" ? \"\" : \"d-none\" }>\n              <i class=\"fas fa-tag\"></i>\n              <p>${item.Ticketinfo}</p>\n            </div>\n          </li>\n        </ul>\n    </li>`;\n    str += content;\n  });\n  cardList.innerHTML = str;\n}\n\n//監聽select change event\nselect.addEventListener(\"change\", switchDataSelect, false);\n\nfunction switchDataSelect(e){\n  if(e.target.value == \"\"){\n    return ;\n  };\n  \n  let chosenDistrict = e.target.value;\n  dataFilter(chosenDistrict) ;\n  \n  // 切換分頁\n  if (e.target.dataset.type === 'tab' || e.target.dataset.type === \"num\" ) {\n    const page = e.target.dataset.page ;\n    dataFilter(chosenDistrict) ;\n    pagination(dataFilter(chosenDistrict), page) ;\n  }\n  return false ;\n}\n\n//監聽tabs click 事件\ntabsList.addEventListener('click',switchDataTabs, false);\n\nfunction switchDataTabs(e){\n  e.preventDefault();\n  if(e.target.nodeName !== \"A\"){\n    return ;\n  };\n   \n  let chosenTab = e.target.dataset.district;\n\n  dataFilter(chosenTab) ;\n  \n    // 切換分頁\n  if (e.target.dataset.type === 'page' || e.target.dataset.type === \"num\" ) {\n    const page = e.target.dataset.page ;\n    const title = subtitle.textContent ;\n    dataFilter(title) ;\n    pagination(dataFilter(title), page) ;\n  }\n  return false ;\n}\n\n// 輸入showData 資料，用來計算 page 數量資料 \n\nfunction pagination(data, nowPage){\n  const dataTotal = data.length;\n  const showPerPage = 6;\n  // 可能會有餘數-> 無條件進位\n  const pageTotal = Math.ceil( dataTotal / showPerPage);\n  let currentPage = nowPage;\n \n  // 當\"當前頁數\"比\"總頁數\"大的時候，\"當前頁數\"就等於\"總頁數\"\n  if (currentPage > pageTotal) {\n    currentPage = pageTotal;\n  }\n  //最小值公式  -> 當前可顯示的最少資料量\n  const minData = (currentPage * showPerPage) - showPerPage + 1 ;\n  //最大值公式\n  const maxData = (currentPage * showPerPage) ;\n  \n  let currentPageData = [];\n  // 處理資料\n  data.forEach((item, index) => {\n    // 獲取陣列索引，但因為索引是從 0 開始所以要 +1。\n    const num = index + 1;\n\n    if ( num >= minData && num <= maxData) {\n      currentPageData.push(item); //用來篩選的陣列\n    };\n  });\n\n  //物件中的資料都是字串\n  page = {\n    dataTotal,\n    pageTotal,\n    currentPage,\n    hasPage: currentPage > 1,  //boolean\n    hasNext: currentPage < dataTotal,\n  };\n  \n  updateData(currentPageData);\n  pageBtn(page,nowPage);\n\n}\n\n//新增頁數功能 渲染在畫面中 ->放到renderData\nfunction pageBtn(page, current){\n  //console.log(page);\n  let str = '';\n  const pageLen = page.pageTotal ; //總共頁數\n  const now = parseInt(page.currentPage);\n  \n  if(current > 1){\n      str += `<li class=\"page-item\">\n      <a href=\"#\" class=\"page-link active\" data-type=\"page\" data-page=\"${now - 1}\">\n        <i class=\"fas fa-angle-left\"></i> prev</a> \n      </li>`;\n  }else{\n      str += `<li class=\"page-item\">\n                 <a href=\"#\" class=\"page-link\" data-type=\"page\" data-page=\"${now}\"><i class=\"fas fa-angle-left\">\n                  </i> prev</a> \n              </li>`;\n  };\n  \n  for(let i = 1 ; i <= pageLen ; i ++){\n      if(parseInt(page.currentPage) === i){\n        str += `<li class=\"page-item\">\n                 <a href=\"#\" class=\"page-link active\" data-type=\"num\" data-page=\"${i}\">${i}</a>\n                </li>`; \n      }else{\n         str += `<li class=\"page-item\">\n      <a href=\"#\" class=\"page-link\" data-type=\"num\" data-page=\"${i}\">${i}</a>\n      </li>`; \n      };\n    };\n  \n  if(current < pageLen){\n      str += `<li class=\"page-item\">\n                <a href=\"#\" class=\"page-link active\" data-type=\"page\" data-page=\"${now + 1}\">next <i class=\"fas fa-angle-right\">    </i></a> \n              </li>`;\n  }else{\n      str += `<li class=\"page-item\">\n                <a href=\"#\" class=\"page-link\" data-type=\"page\" data-page=\"${now}\">next <i class=\"fas fa-angle-right\">    </i></a>\n      </li>`;\n  };\n  \n  pageList.innerHTML = str;\n\n}\n\n//user 點擊換頁功能 監聽 pageList click event\n\npageList.addEventListener('click', switchPage, false);\n\n//這一段無效 只能用全區data//\nfunction switchPage(e){\n e.preventDefault();\n if(e.target.nodeName !== \"A\"){\n   return ;\n };\n\n  const pageClicked = parseInt(e.target.dataset.page);\n  pagination(data, pageClicked);\n  \n}\n\n// 用這行取代 switch Page 防止換頁監聽資訊遺漏\nfunction dataFilter (chosenDistrict) {\n  let filterData = [] ;\n  data.filter(item => {\n    if (chosenDistrict === item.Zone) {\n      filterData.push(item) ;\n    } else if (chosenDistrict === '高雄全區') {\n      filterData = data ;\n    }\n    return filterData ;\n  })\n  select.value = chosenDistrict;\n  subtitle.textContent = chosenDistrict;\n  pagination(filterData, 1) ;\n  return filterData ;\n}"]}